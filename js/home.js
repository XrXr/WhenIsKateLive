(function(){function q(c,e){var b;c.some(function(c,a){if(e>c.end_normalized)return!1;b=c;return!0});return b?b:c[0]}function l(){var c=moment(),e=c.unix(),b=e-c.clone().startOf("isoWeek").unix(),e=e-c.clone().startOf("day").unix(),c=c.hour()-Math.floor(e/3600),b=b+3600*c;if(m.is_live(b))return h=!0,r(!0);if(h)return h=!1,m=q(f,b),l();h=!1;return r(!1,s(b,m.start_normalized))}var t=moment().tz("america/vancouver").isDST(),n=(new Date).getTimezoneOffset(),f=function(){function c(a,b,d){if(!(this instanceof
c))return new c(a,b,d);this.start=b;a=a.toLowerCase();a=g.indexOf(a);if(-1===a)throw Error("Invalid weekday name");this.isoWeekday=a+1;this.duration=d}function e(a,b){if(!(this instanceof e))return new e(a,b);this.start=a.clone().zone(n);this.end=a.clone().zone(n);this.end.add("hours",b);this.duration=b;this.start_normalized=this.start.unix()-this.start.clone().startOf("isoWeek").unix();this.end_normalized=this.end.unix()-this.end.clone().startOf("isoWeek").unix()}function b(a){return new e(moment(a.start+
" "+d+" "+a.isoWeekday+" 1 1970","h:m a Z E WW YYYY"),a.duration)}var g="monday tuesday wednesday thursday friday saturday sunday".split(" "),a=[c("Monday","12:00 PM",3),c("Monday","6:00 PM",2),c("Tuesday","12:00 PM",3),c("Wednesday","6:00 PM",2),c("Thursday","9:00 PM",2),c("Friday","12:00 PM",3),c("Saturday","3:00 PM",3),c("Sunday","11:00 AM",3)];e.prototype.toString=function(){var a=this.start.format("a"),b=this.end.format("a"),d=0<this.start.minutes()?["h:m","a"]:["h","a"],c=0<this.end.minutes()?
["h:m","a"]:["h","a"];a===b&&d.pop();return this.start.format(d.join(" "))+" to "+this.end.format(c.join(" "))};e.prototype.is_live=function(a){return a>=this.start_normalized&&a<=this.end_normalized};var d=t?"-0700":"-0800";window.export_internals&&(window.streamer_dst=t,window.visitor_timezone_offset=n,window.TimeSlot=c,window.make_stream=b);return a.map(b)}(),s=function(){function c(b,c){var a=b+" "+c;return 1<b?a+"s":a}function e(b){var e=moment.duration(1E3*b);b=e.days();var a=e.hours(),d=e.minutes(),
e=e.seconds(),f=[];b&&f.push(c(b,"day"));a&&f.push(c(a,"hour"));d&&f.push(c(d,"minute"));e&&f.push(c(e,"second"));return f.join(", ")}return function(b,c){var a=c-b;if(0<a)return e(a);if(0>a)return e(c+604800-b);throw Error("get_countdown() called with invalid arguments");}}(),r=function(){function c(a,b){a.className&&0<a.className.match(new RegExp("(?:^|\\s)"+b+"(?!\\S)","g")).length&&(a.className=a.className.replace(new RegExp("(?:^|\\s)"+b+"(?!\\S)","g"),""))}for(var e=[],b=0,g={},a=0;a<f.length;a++)if(!(a in
g)){g[a]=0;for(var d=f[a],h=[d],l=d.start.isoWeekday(),m=d.start.isoWeek(),n=d.start.year(),d=0;d<f.length;d++)d in g||f[d].start.isoWeekday()!=l||f[d].start.isoWeek()!=m||f[d].start.year()!=n||(h.push(f[d]),g[d]=0);h.length>b&&(b=h.length);e.push(h)}for(d=document.querySelector("tr");d.children.length<f.length;)d.appendChild(document.createElement("th"));for(a=0;a<e.length;a++)d.children[a].textContent=e[a][0].start.format("dddd");for(g=document.querySelector("tbody");g.children.length<b;)g.appendChild(document.createElement("tr"));
for(a=0;a<g.children.length;a++){for(b=g.children[a];b.children.length<e.length;)b.appendChild(document.createElement("td"));0!=a&&(b.className="auxiliary-slots")}for(a=0;a<e.length;a++)for(d=0;d<e[a].length;d++)g.children[d].children[a].textContent=e[a][d].toString();for(a=0;a<e.length;a++)for(d=1;d<e[a].length;d++)console.log("cats"),b=document.createElement("span"),b.className="same-line-slots",b.textContent=", "+e[a][d].toString(),g.children[0].children[a].appendChild(b);document.querySelector("small").textContent=
"All times are converted to your local time";var p=document.querySelector("h3"),k=document.querySelector("h1").children[0];return function(a,b){a?(""===p.className&&(p.className+=" hidden"),c(k,"disguise"),k.textContent="Kate is live right now! Click to watch",k.href="http://www.twitch.tv/lovelymomo"):(c(p,"hidden"),""===k.className&&(k.className+=" disguise"),k.textContent=b,k.href="#")}}(),m=f[0],h=!0;window.export_internals&&(window.get_countdown=s,window.streams=f,window.find_next_stream=q);l();
setInterval(l,1E3)})();
