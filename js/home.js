(function(A){function r(b,d){b=b.filter(function(b){return!b.canceled});var e;b.some(function(b){if(d>b.end_normalized)return!1;e=b;return!0});return e?e:b[0]}function t(b,d,e){for(var f=!1,a=0;a<b.length;a++)for(var c=0;c<b[a].dom_elements.length;c++)b[a].start.day()===d?(b[a].dom_elements[c].style.color="#333",f=!0):b[a].dom_elements[c].style.color="grey";if(!f)for(d=e.start.day(),a=0;a<b.length;a++)if(b[a].start.day()===d)for(c=0;c<b[a].dom_elements.length;c++)b[a].dom_elements[c].style.color=
"#333"}function p(){var b=moment(),d=b.unix(),e=d-b.clone().startOf("isoWeek").unix(),f=d-b.clone().startOf("day").unix(),d=b.day();d!==u&&t(k,d,m);u=d;b=b.hour()-Math.floor(f/3600);e+=3600*b;if(m.is_live(e))return n=!0,v(!0);if(n)return n=!1,m=r(k,e),t(k,d,m),p();n=!1;return v(!1,w(e,m.start_normalized))}var x=moment().tz("america/vancouver").isDST(),q=(new Date).getTimezoneOffset(),B="monday tuesday wednesday thursday friday saturday sunday".split(" "),w=function(){function b(b,e){var f=b+" "+e;
return 1<b?f+"s":f}return function(d,e){if(d===e)throw Error("get_countdown() called with invalid arguments");var f=e-d;0>f&&(f+=604800);var a=moment.duration(1E3*f),f=a.days(),c=a.hours(),h=a.minutes(),a=a.seconds(),g=[];f&&g.push(b(f,"day"));c&&g.push(b(c,"hour"));h&&g.push(b(h,"minute"));a&&g.push(b(a,"second"));return g.join(", ")}}(),C=document.querySelector("#countdown"),y=document.querySelector("#loading-message"),z;try{z=JSON.parse(A)}catch(D){y.textContent="Schedule loading failed! If this problem persists, please contact the author";
return}var k=function(b){function d(a,b,d){this.start=a.clone().zone(q);this.end=a.clone().zone(q);this.end.add("hours",b);this.duration=b;this.start_normalized=this.start.unix()-this.start.clone().startOf("isoWeek").unix();this.end_normalized=this.end.unix()-this.end.clone().startOf("isoWeek").unix();this.dom_elements=[];this.canceled=d}function e(a){var b=moment,e=a.time+" "+f+" ",g=a.weekday.toLowerCase(),g=B.indexOf(g);if(-1===g)throw Error("Invalid weekday name");return new d(b(e+(g+1)+" 1 1970",
"h:m a Z E WW YYYY"),a.duration,a.canceled)}d.prototype.toString=function(){var a=this.start.format("a"),b=this.end.format("a"),d=0<this.start.minutes()?["h:m","a"]:["h","a"],e=0<this.end.minutes()?["h:m","a"]:["h","a"];a===b&&d.pop();return this.start.format(d.join(" "))+" to "+this.end.format(e.join(" "))};d.prototype.is_live=function(a){return a>=this.start_normalized&&a<=this.end_normalized};var f=x?"-0700":"-0800";window.export_internals&&(window.streamer_dst=x,window.visitor_timezone_offset=
q,window.make_stream=e,window.Stream=d);return b.map(e).sort(function(a,b){return a.start_normalized-b.start_normalized})}(z),v=function(b){for(var d=[],e=0,f={},a=0;a<b.length;a++)if(!(a in f)){f[a]=0;for(var c=b[a],h=[c],g=c.start.isoWeekday(),c=0;c<b.length;c++)c in f||b[c].start.isoWeekday()!==g||(h.push(b[c]),f[c]=0);h.length>e&&(e=h.length);d.push(h)}for(c=document.querySelector("tr");c.children.length<d.length;)c.appendChild(document.createElement("th"));for(a=0;a<d.length;a++)c.children[a].textContent=
d[a][0].start.format("dddd"),d[a][0].dom_elements.push(c.children[a]);for(b=document.querySelector("tbody");b.children.length<e;)b.appendChild(document.createElement("tr"));for(a=0;a<b.children.length;a++){for(c=b.children[a];c.children.length<d.length;)c.appendChild(document.createElement("td"));0!==a&&(c.className="auxiliary-slots")}for(a=0;a<d.length;a++)for(c=0;c<d[a].length;c++)e=d[a][c],f=b.children[c].children[a],h=document.createElement("span"),h.textContent=d[a][c].toString(),e.canceled&&
h.classList.add("canceled"),f.appendChild(h),e.dom_elements.push(b.children[c].children[a]),1<=c&&(f=document.createElement("span"),f.className="same-line-slots",f.textContent=", "+e.toString(),b.children[0].children[a].appendChild(f));var k=document.querySelector("h3"),l=document.querySelector("h1").children[0];return function(a,b){a?(k.classList.add("hidden"),l.classList.remove("disguise"),l.textContent="Kate is live right now! Click to watch",l.href="http://www.twitch.tv/lovelymomo"):(k.classList.remove("hidden"),
l.classList.add("disguise"),l.textContent=b,l.href="#")}}(k),m=k[0],n=!0,u=-1;window.export_internals&&(window.get_countdown=w,window.streams=k,window.find_next_stream=r,window.setTimeout(window.internal_exported,0));y.classList.add("hidden");C.classList.remove("hidden");p();setInterval(p,1E3)})('[{"weekday":"Monday","time":"6:00 PM","duration":2,"canceled":false},{"weekday":"Wednesday","time":"5:00 PM","duration":2,"canceled":false},{"weekday":"Thursday","time":"9:00 PM","duration":2,"canceled":false},{"weekday":"Saturday","time":"3:00 PM","duration":2,"canceled":false},{"weekday":"Sunday","time":"4:00 PM","duration":2,"canceled":false}]');
