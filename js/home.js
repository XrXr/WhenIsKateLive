(function(m){function t(a,c){a=a.filter(function(b){return!b.canceled});var b;a.some(function(a){if(c>a.end_normalized)return!1;b=a;return!0});return b?b:a[0]}function u(a,c,b){var e=!1,d,f;for(d=0;d<a.length;d++)for(f=0;f<a[d].dom_elements.length;f++)a[d].start.day()===c?(a[d].dom_elements[f].style.color="#333",e=!0):a[d].dom_elements[f].style.color="grey";if(!e)for(c=b.start.day(),d=0;d<a.length;d++)if(a[d].start.day()===c)for(f=0;f<a[d].dom_elements.length;f++)a[d].dom_elements[f].style.color=
"#333"}function q(){var a=moment(),c,b=a.unix();c=b-a.clone().startOf("isoWeek").unix();b-=a.clone().startOf("day").unix();b=a.hour()-Math.floor(b/3600);c+=3600*b;a=a.day();a!==v&&u(k,a,l);v=a;if(l.is_live(c))return n=!0,w(!0);if(n)return n=!1,l=t(k,c),u(k,a,l),q();n=!1;return w(!1,x(c,l.start_normalized))}var y=moment().tz("america/vancouver").isDST(),r=(new Date).getTimezoneOffset(),A="monday tuesday wednesday thursday friday saturday sunday".split(" "),x=function(){function a(a,b){var e=a+" "+
b;return 1<a?e+"s":e}return function(c,b){if(c===b)throw Error("get_countdown() called with invalid arguments");var e=b-c;0>e&&(e+=604800);var d=moment.duration(1E3*e),e=d.days(),f=d.hours(),h=d.minutes(),d=d.seconds(),g=[];e&&g.push(a(e,"day"));f&&g.push(a(f,"hour"));h&&g.push(a(h,"minute"));d&&g.push(a(d,"second"));return g.join(", ")}}(),w=function(){var a=document.querySelector("h3"),c=document.querySelector("h1").children[0];return function(b,e){b?(a.classList.add("hidden"),c.classList.remove("disguise"),
c.textContent="Kate is live right now! Click to watch",c.href="http://www.twitch.tv/lovelymomo"):(a.classList.remove("hidden"),c.classList.add("disguise"),c.textContent=e,c.href="#")}}(),B=document.querySelector("#countdown"),z=document.querySelector("#loading-message"),p;try{p=JSON.parse(m)}catch(C){z.textContent="Schedule loading failed! If this problem persists, please contact the author";return}var k=function(a){function c(a,b,c){this.start=a.clone().zone(r);this.end=a.clone().zone(r);this.end.add("hours",
b);this.duration=b;this.start_normalized=this.start.unix()-this.start.clone().startOf("isoWeek").unix();this.end_normalized=this.end.unix()-this.end.clone().startOf("isoWeek").unix();this.dom_elements=[];this.canceled=c}function b(a){var b=moment,h=a.time+" "+e+" ",g=a.weekday.toLowerCase(),g=A.indexOf(g);if(-1===g)throw Error("Invalid weekday name");return new c(b(h+(g+1)+" 1 1970","h:m a Z E WW YYYY"),a.duration,a.canceled)}c.prototype.toString=function(){var a=this.start.format("a"),b=this.end.format("a"),
c=0<this.start.minutes()?["h:m","a"]:["h","a"],e=0<this.end.minutes()?["h:m","a"]:["h","a"];a===b&&c.pop();return this.start.format(c.join(" "))+" to "+this.end.format(e.join(" "))};c.prototype.is_live=function(a){return a>=this.start_normalized&&a<=this.end_normalized};var e=y?"-0700":"-0800";window.export_internals&&(window.streamer_dst=y,window.visitor_timezone_offset=r,window.make_stream=b,window.Stream=c);return a.map(b).sort(function(a,b){return a.start_normalized-b.start_normalized})}(p);m=
function(a){var c,b,e=[],d={};for(c=0;c<a.length;c++)if(!(c in d)){d[c]=0;b=a[c];var f=[b],h=b.start.isoWeekday();for(b=0;b<a.length;b++)b in d||a[b].start.isoWeekday()!==h||(f.push(a[b]),d[b]=0);e.push(f)}return e}(k);p=Math.max.apply(null,m.map(function(a){return a.length}));(function(a,c){for(var b,e,d=document.querySelector("tr");d.children.length<a.length;)d.appendChild(document.createElement("th"));for(b=0;b<a.length;b++)d.children[b].textContent=a[b][0].start.format("dddd"),a[b][0].dom_elements.push(d.children[b]);
for(d=document.querySelector("tbody");d.children.length<c;)d.appendChild(document.createElement("tr"));for(b=0;b<d.children.length;b++){for(e=d.children[b];e.children.length<a.length;)e.appendChild(document.createElement("td"));0!==b&&(e.className="auxiliary-slots")}for(b=0;b<a.length;b++)for(e=0;e<a[b].length;e++){var f=a[b][e],h=d.children[e].children[b],g=document.createElement("span");g.textContent=a[b][e].toString();f.canceled&&g.classList.add("canceled");h.appendChild(g);f.dom_elements.push(d.children[e].children[b]);
1<=e&&(h=document.createElement("span"),h.className="same-line-slots",h.textContent=", "+f.toString(),d.children[0].children[b].appendChild(h))}})(m,p);var l=k[0],n=!0,v=-1;window.export_internals&&(window.get_countdown=x,window.streams=k,window.find_next_stream=t,window.setTimeout(window.internal_exported,0));z.classList.add("hidden");B.classList.remove("hidden");q();setInterval(q,1E3)})('[{"weekday":"Monday","time":"6:00 PM","duration":2,"canceled":false},{"weekday":"Wednesday","time":"5:00 PM","duration":2,"canceled":false},{"weekday":"Thursday","time":"9:00 PM","duration":2,"canceled":false},{"weekday":"Saturday","time":"3:00 PM","duration":2,"canceled":false},{"weekday":"Sunday","time":"4:00 PM","duration":2,"canceled":false}]');
