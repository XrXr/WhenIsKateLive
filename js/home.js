(function(){function r(f,c){var d;f.some(function(b,a){if(c>b.end_normalized)return!1;d=b;return!0});return d?d:f[0]}function t(f,c){for(var d=!1,b=0;b<g.length;b++)for(var a=0;a<g[b].dom_elements.length;a++)g[b].start.day()===f?(g[b].dom_elements[a].style.color="#333",d=!0):g[b].dom_elements[a].style.color="grey";if(!d)for(d=c.start.day(),b=0;b<g.length;b++)if(g[b].start.day()===d)for(a=0;a<g[b].dom_elements.length;a++)g[b].dom_elements[a].style.color="#333"}function n(){var f=moment(),c=f.unix(),
d=c-f.clone().startOf("isoWeek").unix(),b=c-f.clone().startOf("day").unix(),c=f.day();c!==u&&t(c,h);u=c;f=f.hour()-Math.floor(b/3600);d+=3600*f;if(h.is_live(d))return m=!0,v(!0);if(m)return m=!1,h=r(g,d),t(c,h),n();m=!1;return v(!1,w(d,h.start_normalized))}var x=moment().tz("america/vancouver").isDST(),q=(new Date).getTimezoneOffset(),g=function(){function f(a,c,d){if(!(this instanceof f))return new f(a,c,d);this.start=c;a=a.toLowerCase();a=b.indexOf(a);if(-1===a)throw Error("Invalid weekday name");
this.isoWeekday=a+1;this.duration=d}function c(a,b){if(!(this instanceof c))return new c(a,b);this.start=a.clone().zone(q);this.end=a.clone().zone(q);this.end.add("hours",b);this.duration=b;this.start_normalized=this.start.unix()-this.start.clone().startOf("isoWeek").unix();this.end_normalized=this.end.unix()-this.end.clone().startOf("isoWeek").unix();this.dom_elements=[]}function d(a){return new c(moment(a.start+" "+e+" "+a.isoWeekday+" 1 1970","h:m a Z E WW YYYY"),a.duration)}var b="monday tuesday wednesday thursday friday saturday sunday".split(" "),
a=[f("Monday","6:00 PM",2),f("Tuesday","5:00 PM",2),f("Thursday","9:00 PM",2),f("Saturday","3:00 PM",2),f("Sunday","4:00 PM",2)];c.prototype.toString=function(){var a=this.start.format("a"),b=this.end.format("a"),c=0<this.start.minutes()?["h:m","a"]:["h","a"],d=0<this.end.minutes()?["h:m","a"]:["h","a"];a===b&&c.pop();return this.start.format(c.join(" "))+" to "+this.end.format(d.join(" "))};c.prototype.is_live=function(a){return a>=this.start_normalized&&a<=this.end_normalized};var e=x?"-0700":"-0800";
window.export_internals&&(window.streamer_dst=x,window.visitor_timezone_offset=q,window.TimeSlot=f,window.make_stream=d);return a.map(d)}(),w=function(){function f(c,d){var b=c+" "+d;return 1<c?b+"s":b}return function(c,d){if(c===d)throw Error("get_countdown() called with invalid arguments");var b=d-c;0>b&&(b+=604800);var a=moment.duration(1E3*b),b=a.days(),e=a.hours(),g=a.minutes(),a=a.seconds(),l=[];b&&l.push(f(b,"day"));e&&l.push(f(e,"hour"));g&&l.push(f(g,"minute"));a&&l.push(f(a,"second"));return l.join(", ")}}(),
v=function(){function f(a,b){a.className&&0<a.className.match(new RegExp("(?:^|\\s)"+b+"(?!\\S)","g")).length&&(a.className=a.className.replace(new RegExp("(?:^|\\s)"+b+"(?!\\S)","g"),""))}for(var c=[],d=0,b={},a=0;a<g.length;a++)if(!(a in b)){b[a]=0;for(var e=g[a],h=[e],l=e.start.isoWeekday(),m=e.start.isoWeek(),n=e.start.year(),e=0;e<g.length;e++)e in b||g[e].start.isoWeekday()!=l||g[e].start.isoWeek()!=m||g[e].start.year()!=n||(h.push(g[e]),b[e]=0);h.length>d&&(d=h.length);c.push(h)}for(e=document.querySelector("tr");e.children.length<
c.length;)e.appendChild(document.createElement("th"));for(a=0;a<c.length;a++)e.children[a].textContent=c[a][0].start.format("dddd"),c[a][0].dom_elements.push(e.children[a]);for(b=document.querySelector("tbody");b.children.length<d;)b.appendChild(document.createElement("tr"));for(a=0;a<b.children.length;a++){for(d=b.children[a];d.children.length<c.length;)d.appendChild(document.createElement("td"));0!==a&&(d.className="auxiliary-slots")}for(a=0;a<c.length;a++)for(e=0;e<c[a].length;e++)b.children[e].children[a].textContent=
c[a][e].toString(),c[a][e].dom_elements.push(b.children[e].children[a]),1<=e&&(d=document.createElement("span"),d.className="same-line-slots",d.textContent=", "+c[a][e].toString(),b.children[0].children[a].appendChild(d));document.querySelector("small").textContent="All times are converted to your local time";var p=document.querySelector("h3"),k=document.querySelector("h1").children[0];return function(a,b){a?(""===p.className&&(p.className+=" hidden"),f(k,"disguise"),k.textContent="Kate is live right now! Click to watch",
k.href="http://www.twitch.tv/lovelymomo"):(f(p,"hidden"),""===k.className&&(k.className+=" disguise"),k.textContent=b,k.href="#")}}(),h=g[0],m=!0,u=-1;window.export_internals&&(window.get_countdown=w,window.streams=g,window.find_next_stream=r);n();setInterval(n,1E3)})();
