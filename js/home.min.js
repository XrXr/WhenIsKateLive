(function(){function s(b,a){var f=b.get_sorted_array(),c;f.some(function(b,f){if(a.isAfter(b.end))return!1;c=b;return!0});return c?c:f[0]}function m(){var b=moment(),a=moment(0);n(a);a.year(1970);a.isoWeek(1);a.isoWeekday(b.isoWeekday());a.hours(b.hours());a.minutes(b.minutes());a.seconds(b.seconds());b=a.unix();if(p.is_live(b))return k=!0,q(!0);if(k)return k=!1,p=s(h,a),m();k=!1;return q(!1,t(b,p))}var r=new Date,n=function(){var b=r.getTimezoneOffset();return function(a){a.zone(b);return a}}(),
h=function(){function b(a,f,d){if(!(this instanceof b))return new b(a,f,d);this.key=a.toLowerCase();this.start=f;a=a.toLowerCase();a=c.indexOf(a);if(-1===a)throw Error("Invalid weekday name");this.isoWeekday=a+1;this.duration=d}function a(b,c){if(!(this instanceof a))return new a(b,c);this.start=b.clone();this.end=b.clone();this.end.add("hours",c);this.duration=c}function f(a,b){return a.start.unix()-b.start.unix()}var c="monday tuesday wednesday thursday friday saturday sunday".split(" "),d=[b("Monday",
20,3),b("Tuesday",13,2),b("Thursday",22,2),b("Saturday",20,3)];a.prototype.convert_time=function(){n(this.start);n(this.end)};a.prototype.normalize=function(){this.start.year(1970);this.start.isoWeek(1);this.end.year(1970);this.end.isoWeek(1)};a.prototype.toString=function(){var a=this.start.format("a");return a===this.end.format("a")?this.start.format("h")+" to "+this.end.format("h")+" "+a:this.start.format("h a")+" to "+this.end.format("h a")};a.prototype.is_live=function(a){return a>=this.start.unix()&&
a<=this.end.unix()};var e={},g=moment(0);g.zone(480);moment(r).isDST()&&g.zone(420);var l=null;Object.defineProperty(e,"length",{value:d.length});d.forEach(function(b,c){l=g.clone();l.isoWeekday(b.isoWeekday);l.hours(b.start);e[c]=new a(l,b.duration);e[c].convert_time()});Object.defineProperty(e,"get_sorted_array",{value:function(){var a=null;return function(){if(null!==a)return a;var b=[],c;for(c in this)this.hasOwnProperty(c)&&b.push(this[c]);a=b.sort(f);return b}}()});return e}(),t=function(){function b(a,
b){var d=a+" "+b;return 1<a?d+"s":d}function a(a){var c=moment.duration(1E3*a);a=c.days();var d=c.hours(),e=c.minutes(),c=c.seconds(),g=[];a&&g.push(b(a,"day"));d&&g.push(b(d,"hour"));e&&g.push(b(e,"minute"));c&&g.push(b(c,"second"));return g.join(", ")}return function(b,c){var d=c.start.unix()-b;if(0<d)return a(d);if(0>d)return a(c.start.clone().add("weeks",1).unix()-b);throw Error("get_countdown() called with Invalid arguments");}}(),q=function(){function b(a,b){a.className&&0<a.className.match(new RegExp("(?:^|\\s)"+
b+"(?!\\S)","g")).length&&(a.className=a.className.replace(new RegExp("(?:^|\\s)"+b+"(?!\\S)","g"),""))}for(var a=document.querySelectorAll("tr"),f=a[0];f.children.length<h.length;)f.appendChild(document.createElement("th"));for(var c=0;c<h.length;c++)f.children[c].textContent=h[c].start.format("dddd");for(a=a[1];a.children.length<h.length;)a.appendChild(document.createElement("td"));for(c=0;c<h.length;c++)a.children[c].textContent=h[c].toString();document.querySelector("small").textContent="All times are converted to your local time";
var d=document.querySelector("h3"),e=document.querySelector("h1").children[0];return function(a,c){a?(""===d.className&&(d.className+=" soft-hide"),b(e,"disguise prefix"),e.textContent="Kate is live right now! Click to watch",e.href="http://www.twitch.tv/lovelymomo"):(b(d,"soft-hide"),""===e.className&&(e.className+=" disguise prefix"),e.textContent=c,e.href="#")}}(),p=h[0],k=!0;m();setInterval(m,1E3)})();
