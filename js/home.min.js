(function(){function r(a,c){var e=a.get_sorted_array(),b;e.some(function(a,e){if(c>a.end_normalized)return!1;b=a;return!0});return b?b:e[0]}function n(){var a=moment(),a=a.unix()-a.clone().startOf("isoWeek").unix();if(l.is_live(a))return m=!0,p(!0);if(m)return m=!1,l=r(h,a),n();m=!1;return p(!1,s(a,l.start_normalized))}var t=moment().tz("america/vancouver").isDST(),q=(new Date).getTimezoneOffset(),h=function(){function a(g,e,c){if(!(this instanceof a))return new a(g,e,c);this.start=e;g=g.toLowerCase();
g=b.indexOf(g);if(-1===g)throw Error("Invalid weekday name");this.isoWeekday=g+1;this.duration=c}function c(g,a){if(!(this instanceof c))return new c(g,a);this.start=g.clone().zone(q);this.end=g.clone().zone(q);this.end.add("hours",a);this.duration=a;this.start_normalized=this.start.unix()-this.start.clone().startOf("isoWeek").unix();this.end_normalized=this.end.unix()-this.end.clone().startOf("isoWeek").unix()}function e(a,b){return a.start.unix()-b.start.unix()}var b="monday tuesday wednesday thursday friday saturday sunday".split(" "),
f=[a("Monday","8:00  PM",3),a("Tuesday","10:00 AM",2),a("Wednesday","10:00 AM",2),a("Thursday","10:00 PM",2),a("Friday","5:30  PM",2),a("Saturday","8:00  PM",3),a("Sunday","11:00 AM",2)];c.prototype.toString=function(){var a=this.start.format("a"),b=this.end.format("a"),e=0<this.start.minutes()?["h:m","a"]:["h","a"],c=0<this.end.minutes()?["h:m","a"]:["h","a"];a===b&&e.pop();return this.start.format(e.join(" "))+" to "+this.end.format(c.join(" "))};c.prototype.is_live=function(a){return a>=this.start_normalized&&
a<=this.end_normalized};var d={},k=t?"-0700":"-0800";Object.defineProperty(d,"length",{value:f.length});f.forEach(function(a,b){d[b]=new c(moment(a.start+" "+k+" "+a.isoWeekday+" 1 1970","h:m a Z E WW YYYY"),a.duration)});Object.defineProperty(d,"get_sorted_array",{value:function(){var a=null;return function(){if(null!==a)return a;var b=[],c;for(c in this)this.hasOwnProperty(c)&&b.push(this[c]);a=b.sort(e);return b}}()});return d}(),s=function(){function a(a,b){var c=a+" "+b;return 1<a?c+"s":c}function c(c){var b=
moment.duration(1E3*c);c=b.days();var f=b.hours(),d=b.minutes(),b=b.seconds(),k=[];c&&k.push(a(c,"day"));f&&k.push(a(f,"hour"));d&&k.push(a(d,"minute"));b&&k.push(a(b,"second"));return k.join(", ")}return function(a,b){var f=b-a;if(0<f)return c(f);if(0>f)return c(l.start_normalized+604800-a);throw Error("get_countdown() called with invalid arguments");}}(),p=function(){function a(a,b){a.className&&0<a.className.match(new RegExp("(?:^|\\s)"+b+"(?!\\S)","g")).length&&(a.className=a.className.replace(new RegExp("(?:^|\\s)"+
b+"(?!\\S)","g"),""))}for(var c=document.querySelectorAll("tr"),e=c[0];e.children.length<h.length;)e.appendChild(document.createElement("th"));for(var b=0;b<h.length;b++)e.children[b].textContent=h[b].start.format("dddd");for(c=c[1];c.children.length<h.length;)c.appendChild(document.createElement("td"));for(b=0;b<h.length;b++)c.children[b].textContent=h[b].toString();document.querySelector("small").textContent="All times are converted to your local time";var f=document.querySelector("h3"),d=document.querySelector("h1").children[0];
return function(b,c){b?(""===f.className&&(f.className+=" soft-hide"),a(d,"disguise prefix"),d.textContent="Kate is live right now! Click to watch",d.href="http://www.twitch.tv/lovelymomo"):(a(f,"soft-hide"),""===d.className&&(d.className+=" disguise prefix"),d.textContent=c,d.href="#")}}(),l=h[0],m=!0;n();setInterval(n,1E3)})();
