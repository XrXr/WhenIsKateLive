!function(){"use strict";function e(e){return document.querySelector(e)}function t(e,t){e.classList.add(t)}function n(e,t){e.classList.remove(t)}function r(e,t,n){this.start=e.clone().zone(k),this.end=this.start.clone(),this.end.add("hours",t),this.duration=t,this.start_normalized=this.start.unix()-this.start.clone().startOf("isoWeek").unix(),this.end_normalized=this.end.unix()-this.end.clone().startOf("isoWeek").unix(),this.dom_elements=[],this.canceled=n}function o(e){return e.minutes()>0?["h:m","a"]:["h","a"]}function i(e){var t=e.toLowerCase(),n=z.indexOf(t);if(-1===n)throw new Error("Invalid weekday name");return n+1}function a(e){function t(e){return new r(moment(e.time+" "+n+" "+i(e.weekday)+" 1 1970",o),e.duration,e.canceled)}var n=x?"-0700":"-0800",o="h:m a Z E WW YYYY";return window.export_internals&&(window.streamer_dst=x,window.visitor_timezone_offset=k,window.make_stream=t,window.Stream=r),e.map(t).sort(function(e,t){return e.start_normalized-t.start_normalized})}function d(t,n){function r(e){for(var t=document.createElement("tr");t.children.length<e;)t.appendChild(document.createElement("td"));return t}var o,i,a=e("tr");for(o=0;o<t.length;o++){var d=t[o][0],u=document.createElement("th");u.textContent=d.start.format("dddd"),d.dom_elements.push(u),a.appendChild(u)}var l=e("tbody");for(o=0;n>o;o++){var c=r(t.length);0!==o&&(c.className="auxiliary-slots"),l.appendChild(c)}for(o=0;o<t.length;o++)for(i=0;i<t[o].length;i++){var h=t[o][i],m=l.children[i].children[o];m.appendChild(s(h)),h.dom_elements.push(m),i>=1&&l.children[0].children[o].appendChild(s(h,!0))}}function s(e,n){var r=document.createElement("span"),o=e.toString();return n&&(o=", "+o,t(r,"same-line-slots")),r.textContent=o,e.canceled&&t(r,"canceled"),r}function u(e,t){e=e.filter(function(e){return!e.canceled});var n;return e.some(function(e){return t>e.end_normalized?!1:(n=e,!0)}),n?n:e[0]}function l(e,t){var n=e+" "+t;return e>1?n+"s":n}function c(e){var t=moment.duration(1e3*e),n=t.days(),r=t.hours(),o=t.minutes(),i=t.seconds(),a=[];return n&&a.push(l(n,"day")),r&&a.push(l(r,"hour")),o&&a.push(l(o,"minute")),i&&a.push(l(i,"second")),a.join(", ")}function h(e,t){if(e===t)throw new Error("get_countdown() called with invalid arguments");var n=t-e;return 0>n&&(n+=g),c(n)}function m(e,r){return e?(t(C,M),n(W,E),W.textContent="Kate is live right now! Click to watch",void(W.href="http://www.twitch.tv/lovelymomo")):(n(C,M),t(W,E),W.textContent=r,void(W.href="#"))}function f(e,t,n){var r,o,i=!1;for(r=0;r<e.length;r++)for(o=0;o<e[r].dom_elements.length;o++)e[r].start.day()===t?(e[r].dom_elements[o].style.color=S,i=!0):e[r].dom_elements[o].style.color=O;if(!i){var a=n.start.day();for(r=0;r<e.length;r++)if(e[r].start.day()===a)for(o=0;o<e[r].dom_elements.length;o++)e[r].dom_elements[o].style.color=S}}function w(e){var t,n,r=[],o={};for(t=0;t<e.length;t++)if(!(t in o)){o[t]=0;var i=e[t],a=[i],d=i.start.isoWeekday();for(n=0;n<e.length;n++)n in o||e[n].start.isoWeekday()===d&&(a.push(e[n]),o[n]=0);r.push(a)}return r}function y(e){var t=e.unix(),n=t-e.clone().startOf("isoWeek").unix(),r=t-e.clone().startOf("day").unix(),o=e.hour()-Math.floor(r/_);return n+=o*_}function v(){var e=moment(),t=y(e),n=e.day();return n!==N&&f(Y,n,D),N=n,D.is_live(t)?(I=!0,m(!0)):I?(I=!1,D=u(Y,t),f(Y,n,D),v()):(I=!1,m(!1,h(t,D.start_normalized)))}var p=[{weekday:"Monday",time:"6:00 PM",duration:2,canceled:!1},{weekday:"Wednesday",time:"5:00 PM",duration:2,canceled:!1},{weekday:"Thursday",time:"9:00 PM",duration:2,canceled:!1},{weekday:"Saturday",time:"3:00 PM",duration:2,canceled:!1},{weekday:"Sunday",time:"4:00 PM",duration:2,canceled:!1}],_=3600,g=604800,x=moment().tz("america/vancouver").isDST(),k=(new Date).getTimezoneOffset(),z=["monday","tuesday","wednesday","thursday","friday","saturday","sunday"];r.prototype.toString=function(){function e(e,t){var n=e.hours();return 12===n?"Noon":0===n?"Beginning of day":e.format(t.join(" "))}var t=this.start,n=this.end,r=t.format("a"),i=n.format("a"),a=o(this.start),d=o(this.end);return t.isoWeekday()!==n.isoWeekday()?e(t,a)+" for "+this.duration+" hours":(r===i&&a.pop(),e(t,a)+" to "+e(n,d))},r.prototype.is_live=function(e){return e>=this.start_normalized&&e<=this.end_normalized};var C=e("h3"),W=e("h1").children[0],M="hidden",E="disguise",S="#333",O="grey",P=e("#countdown"),T=e("#loading-message"),Y=a(p),L=w(Y),j=Math.max.apply(null,L.map(function(e){return e.length}));d(L,j);var D=Y[0],I=!0,N=-1;window.export_internals&&(window.get_countdown=h,window.streams=Y,window.find_next_stream=u,window.setTimeout(window.internal_exported,0)),t(T,"hidden"),n(P,"hidden"),v(),setInterval(v,1e3)}();