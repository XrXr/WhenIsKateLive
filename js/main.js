!function(){"use strict";function e(e){return document.querySelector(e)}function t(e,t){e.classList.add(t)}function n(e,t){e.classList.remove(t)}function r(e,t,n){this.start=e.clone().zone(x),this.end=this.start.clone(),this.end.add("hours",t),this.duration=t,this.start_normalized=this.start.unix()-this.start.clone().startOf("isoWeek").unix(),this.end_normalized=this.end.unix()-this.end.clone().startOf("isoWeek").unix(),this.dom_elements=[],this.canceled=n}function i(e){return e.minutes()>0?["h:m","a"]:["h","a"]}function o(e){var t=e.toLowerCase(),n=z.indexOf(t);if(n===-1)throw new Error("Invalid weekday name");return n+1}function a(e){function t(e){return new r(moment(e.time+" "+n+" "+o(e.weekday)+" 1 1970",i),e.duration,e.canceled)}var n=k?"-0700":"-0800",i="h:m a Z E WW YYYY";return window.export_internals&&(window.streamer_dst=k,window.visitor_timezone_offset=x,window.make_stream=t,window.Stream=r),e.map(t).sort(function(e,t){return e.start_normalized-t.start_normalized})}function d(t,n){function r(e){for(var t=document.createElement("tr");t.children.length<e;)t.appendChild(document.createElement("td"));return t}var i,o,a=e("tr");for(i=0;i<t.length;i++){var d=t[i][0],u=document.createElement("th");u.textContent=d.start.format("dddd"),d.dom_elements.push(u),a.appendChild(u)}var l=e("tbody");for(i=0;i<n;i++){var c=r(t.length);0!==i&&(c.className="auxiliary-slots"),l.appendChild(c)}for(i=0;i<t.length;i++)for(o=0;o<t[i].length;o++){var m=t[i][o],h=l.children[o].children[i];h.appendChild(s(m)),m.dom_elements.push(h),o>=1&&l.children[0].children[i].appendChild(s(m,!0))}}function s(e,n){var r=document.createElement("span"),i=e.toString();return n&&(i=", "+i,t(r,"same-line-slots")),r.textContent=i,e.canceled&&t(r,"canceled"),r}function u(e,t){e=e.filter(function(e){return!e.canceled});var n;return e.some(function(e){return!(t>e.end_normalized)&&(n=e,!0)}),n?n:e[0]}function l(e,t){var n=e+" "+t;return e>1?n+"s":n}function c(e){var t=moment.duration(1e3*e),n=t.days(),r=t.hours(),i=t.minutes(),o=t.seconds(),a=[];return n&&a.push(l(n,"day")),r&&a.push(l(r,"hour")),i&&a.push(l(i,"minute")),o&&a.push(l(o,"second")),a.join(", ")}function m(e,t){if(e===t)throw new Error("get_countdown() called with invalid arguments");var n=t-e;return n<0&&(n+=g),c(n)}function h(e,r){return e?(t(C,W),n(M,E),M.textContent="Kate is live right now! Click to watch",void(M.href="http://www.twitch.tv/lovelymomo")):(n(C,W),t(M,E),M.textContent=r,void(M.href="#"))}function f(e,t,n){var r,i,o=!1;for(r=0;r<e.length;r++)for(i=0;i<e[r].dom_elements.length;i++)e[r].start.day()===t?(e[r].dom_elements[i].style.color=P,o=!0):e[r].dom_elements[i].style.color=S;if(!o){var a=n.start.day();for(r=0;r<e.length;r++)if(e[r].start.day()===a)for(i=0;i<e[r].dom_elements.length;i++)e[r].dom_elements[i].style.color=P}}function v(e){var t,n,r=[],i={};for(t=0;t<e.length;t++)if(!(t in i)){i[t]=0;var o=e[t],a=[o],d=o.start.isoWeekday();for(n=0;n<e.length;n++)n in i||e[n].start.isoWeekday()===d&&(a.push(e[n]),i[n]=0);r.push(a)}return r}function y(e){var t=e.unix(),n=t-e.clone().startOf("isoWeek").unix(),r=t-e.clone().startOf("day").unix(),i=e.hour()-Math.floor(r/_);return n+=i*_}function w(){var e=moment(),t=y(e),n=e.day();return n!==I&&f(Y,n,D),I=n,D.is_live(t)?h(!0):t>D.end_normalized?(D=u(Y,t),f(Y,n,D),w()):h(!1,m(t,D.start_normalized))}var p=[{weekday:"Monday",time:"6:00 PM",duration:void 0,canceled:!1},{weekday:"Tuesday",time:"6:00 PM",duration:void 0,canceled:!1},{weekday:"Wednesday",time:"5:00 PM",duration:void 0,canceled:!1},{weekday:"Thursday",time:"9:30 PM",duration:void 0,canceled:!1},{weekday:"Friday",time:"5:00 PM",duration:void 0,canceled:!1},{weekday:"Saturday",time:"3:00 PM",duration:void 0,canceled:!1},{weekday:"Sunday",time:"4:00 PM",duration:void 0,canceled:!1}],_=3600,g=604800,k=moment().tz("america/vancouver").isDST(),x=(new Date).getTimezoneOffset(),z=["monday","tuesday","wednesday","thursday","friday","saturday","sunday"];r.prototype.toString=function(){function e(e,t){var n=e.hours(),r=e.minutes();if(0===r){if(12===n)return"Noon";if(0===n)return"Beginning of day"}return e.format(t.join(" "))}var t=this.start,n=this.end,r=t.format("a"),o=n.format("a"),a=i(this.start);if(!this.duration)return e(t,a);var d=i(this.end);return t.isoWeekday()!==n.isoWeekday()?e(t,a)+" for "+this.duration+" hours":(r===o&&a.pop(),e(t,a)+" to "+e(n,d))},r.prototype.is_live=function(e){return!!this.duration&&(e>=this.start_normalized&&e<=this.end_normalized)};var C=e("h3"),M=e("h1").children[0],W="hidden",E="disguise",P="#333",S="grey",O=e("#countdown"),T=e("#loading-message"),Y=a(p),L=v(Y),j=Math.max.apply(null,L.map(function(e){return e.length}));d(L,j);var D=Y[0],I=-1;t(T,"hidden"),n(O,"hidden"),w(),setInterval(w,1e3),window.export_internals&&(window.get_countdown=m,window.streams=Y,window.find_next_stream=u)}();